<!DOCTYPE html>
<html>
    <title>Text Formatter</title>
<body>

    <h2>Text Formatter</h2>

    Page Number: <input id="pageNum" type="number" size="10" value="1" style="margin-bottom: 5px"><br>
    Heading 1: <input id="header1" type="text" size="40" value="" style="margin-bottom: 5px"><br>
    Heading 2: <input id="header2" type="text" size="40" value="" style="margin-bottom: 5px"><br>
    
    Body:<br>
    <textarea id="body" rows="5" cols="80"></textarea><br>
    <button onclick="clearBody()" style="margin-bottom: 5px">Clear Body</button>
    <button onclick="clearResult()" style="margin-bottom: 5px">Clear Result</button><br>
    <button onclick="format()" style="padding-left: 65px; padding-right: 65px; padding-top: 15px; padding-bottom: 15px; margin-bottom: 5px">Format</button><br>
    
    Result:<br>
    <textarea id="result" rows="20" cols="80"></textarea><br>
    
    
</body>

<script>
    var result = document.getElementById("result").value;
    
    function format() {
        var mainArray = new Array();
        var bodyArray = new Array();
        
        var pg = document.getElementById("pageNum").value;
        var h1 = document.getElementById("header1").value;
        var h2 = document.getElementById("header2").value;
        var b = document.getElementById("body").value;
        
        if (pg.length != 0) { mainArray.push("###" + pg + "\n"); }
        if (h1.length != 0) { mainArray.push(h1 + "\n\n"); }
        if (h2.length != 0) { mainArray.push(h2 + "\n\n"); }
        //if (b.length != 0) { array.push(b + "\n\n"); }
        
        b = b.replace(/\s+/g,' ').trim(); //Remove extra whitespace from body
        
        
        //Find sentences and push to array
        bodyArray = b.match(/([^\.!\?]+[\.!\?]+)|([^\.!\?]+$)/g);
        
        if (bodyArray != null) { 
            //Trim text
            for (var i = 0; i < bodyArray.length; i++) {
                bodyArray[i] = bodyArray[i].trim()+"\n"
            }
            //Add to main array
            mainArray = mainArray.concat(bodyArray); 
        }
        mainArray.push("\n");
        //console.log(mainArray);
        
        //Update Textbox
        for (var i = 0; i < mainArray.length; i++) {
            result += mainArray[i];
        }
        
        document.getElementById("result").value = result;
        
    }
    
    function clearBody() { document.getElementById("body").value = ""; }
    
    function clearResult() {
        result = ""; //Reset result
        document.getElementById("result").value = result;
        
        mainArray = new Array(); //Reset array
    }
    
    function fix() {
        //result = result.replace(/\s+/g," ").trim();
        
    }
    
</script>
    
</html>
